{
  "openapi": "3.0.1",
  "info": {
    "title": "Deker Direct API",
    "description": "API for direct use of the deker toolkit",
    "contact": {
      "name": "Alex Linossier",
      "email": "alinossier@dekerai.com"
    },
    "version": "2025_v1",
    "license": {
      "name":"Terms of Service",
      "url":"https://app.dekerai.com/app/terms"
    }
  },
  "servers": [
    {
      "url": "https://bbyp8wyza0.execute-api.ap-southeast-2.amazonaws.com/deker-direct",
      "variables": {
        "basePath": {
          "default": "deker-direct"
        }
      }
    }
  ],
  "paths": {
    "/sobo": {
      "post": {
        "summary": "Generate the next set of candidates for a Single Objective model",
        "operationId":"SOBO",
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "description": "Auth Token from Settings & Models page in app. Must be provided as: `Bearer <API Auth Token>`",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "description": "Three values are required for the request body:\r\n\r\n1. `beta`: value balancing exploration (1) and exploitation of known good areas (0). Recommend 0.2-0.4\r\n2. `opt_sel`: binary value defining direction of optimisation. 0 = minimisation, 1 = maximisation\r\n3. `data`: string of an array of JSON objects defining the model table, including headers\r\n\r\n**`data` detailed definition:**\r\n\r\nThe data field contains a table, defined row by row, which contains two sections: the headers, defining the model, and the previous trials data. Both the headers and the previous trials data are provided to the API call as a single string.\r\n\r\nThe table column names are used as the keys to define each row as a JSON object. These JSON objects are then inserted into an array, and the array is converted to a string.\r\n\r\nThe columns names are: Model Name, Input 1, Input 2, ... , Input N, Output 1\r\nThe header rows, in order, are: Type, Min, Max, Step, Weight\r\n\r\nEvery cell within the table must have a value. For Min, Max, and Step, the default value should be 0. For Weight, the default value should be 1. Weight is not used for single objective optimisation requests, but must be included in the table regardless. For the Type fields, the values must be \"Input\", \"Output\" or \"Output Constraint\".\r\n\r\nDouble quotation marks (\\\") should be used within the string, escaped (\\\\\\\") to ensure correct processing in the API. Previous trial data values should be provided as strings, as shown in the example (although providing them as numbers may work fine).\r\n\r\nThe table below converts into the string shown in the Example section. There are the column titles, followed by 5 rows of headers, followed by a single row of previous trial data. There are two inputs and one output for this particular example model.\r\n\r\n\r\nModel Name | Input 1 | Input 2 | Output 1\r\n---------|----------|---------|---------\r\nType   | Input | Input | Output\r\nMin    | 0 | 0 | -1\r\nMax    | 10 | 20 | 1\r\nStep   | 0 | 0 | 0\r\nWeight | 1 | 1 | 1\r\n1 | 6.239 | 19.446 | 0.3\r\n\r\n",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SOBO"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "200 response",
            "headers": {
              "Access-Control-Allow-Origin": {
                "schema": {
                  "type": "string"
                }
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/inline_response_200"
                }
              }
            }
          },
          "4XX": {
            "description": "Error response"
          }
        },
        "security": [
          {
            "deker-demo-auth": []
          }
        ]
      },
      "options": {
        "operationId":"SOBOoptions",
        "summary":"CORS Operations - ignore",
        "security": [
          {
            "deker-demo-auth": []
          }
        ],
        "responses": {
          "200": {
            "description": "200 response",
            "headers": {
              "Access-Control-Allow-Origin": {
                "schema": {
                  "type": "string"
                }
              },
              "Access-Control-Allow-Methods": {
                "schema": {
                  "type": "string"
                }
              },
              "Access-Control-Allow-Headers": {
                "schema": {
                  "type": "string"
                }
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Empty"
                }
              }
            }
          },
          "4XX": {
            "description": "Error response"
          }
        }
      }
    },
    "/wmobo": {
      "post": {
        "summary": "Generate the next set of candidates for a Weighted Mutli-Objective model",
        "operationId":"WMOBO",
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "description": "Auth Token from Settings & Models page in app. Must be provided as: \"Bearer \\<API Auth Token\\>\"",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "description": "Two values are required for the request body:\r\n\r\n1. `beta`: value balancing exploration (1) and exploitation of known good areas (0). Recommend 0.2-0.4\r\n2. `data`: string of an array of JSON objects defining the model table, including headers. The direction of the optimisation is defined in the Weight field.\r\n\r\n**`data` detailed definition:**\r\n\r\nThe data field contains a table, defined row by row, which contains two sections: the headers, defining the model, and the previous trials data. Both the headers and the previous trials data are provided to the API call as a single string.\r\n\r\nThe table column names are used as the keys to define each row as a JSON object. These JSON objects are then inserted into an array, and the array is converted to a string.\r\n\r\nThe columns names are: Model Name, Input 1, Input 2, ... , Input N, Output 1, Output 2, ... , Output N\r\nThe header rows, in order, are: Type, Min, Max, Step, Weight\r\n\r\nEvery cell within the table must have a value. For Min, Max, and Step, the default value should be 0. For Weight, the default value should be 1. For the Type fields, the values must be \"Input\", \"Output\" or \"Output Constraint\".\r\n\r\n*Weight field definition:*\r\nThe Weight field is used to define two model parameters:\r\n1. The relative importance of each Output to achieving the optimisation objective (relative magnitude)\r\n2. The direction of the optimisation (sign)\r\n\r\nThe relative magnitude compares and scales the contribution of each Output based on the absolute value of the Weight field. For example, if there are two Outputs with Weights of -3 and 6:\r\n- Output 2 is considered to be twice as important as Output 1, as 6/3 = 2. Weights of 1 and -2, 5 and 10, or -4 and -8 would produce the same results.\r\n- Output 1 is to be minimised, as it is a negative value. Output 2 is to be maximised, as it is a positive value.\r\n\r\nDouble quotation marks (\\\") should be used within the `data` string, escaped (\\\\\\\") to ensure correct processing in the API. Previous trial data values should be provided as strings, as shown in the example (although providing them as numbers may work fine).\r\n\r\nThe table below converts into the string shown in the Example section. There are the column titles, followed by 5 rows of headers, followed by a single row of previous trial data. There are two inputs and two outputs for this particular example model.\r\n\r\n\r\nModel Name | Input 1 | Input 2 | Output 1 | Output 2\r\n---------|----------|---------|---------|---------\r\nType   | Input | Input | Output | Output\r\nMin    | 0 | 0 | -1 | -2\r\nMax    | 10 | 20 | 1 | 2\r\nStep   | 0 | 0 | 0 | 0\r\nWeight | 1 | 1 | 6 | -3\r\n1 | 1.173 | 8.222 | 0.5 | 1.5",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/WMOBO"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "200 response",
            "headers": {
              "Access-Control-Allow-Origin": {
                "schema": {
                  "type": "string"
                }
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/inline_response_200"
                }
              }
            }
          },
          "4XX": {
            "description": "Error response"
          }
        },
        "security": [
          {
            "deker-demo-auth": []
          }
        ]
      },
      "options": {
        "operationId":"WMOBOoptions",
        "summary":"CORS Operations - ignore",
        "security": [
          {
            "deker-demo-auth": []
          }
        ],
        "responses": {
          "200": {
            "description": "200 response",
            "headers": {
              "Access-Control-Allow-Origin": {
                "schema": {
                  "type": "string"
                }
              },
              "Access-Control-Allow-Methods": {
                "schema": {
                  "type": "string"
                }
              },
              "Access-Control-Allow-Headers": {
                "schema": {
                  "type": "string"
                }
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Empty"
                }
              }
            }
          },
          "4XX": {
            "description": "Error response"
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "SOBO": {
        "title": "SOBO",
        "required": [
          "beta",
          "data",
          "opt_sel"
        ],
        "type": "object",
        "properties": {
          "beta": {
            "maximum": 1,
            "minimum": 0,
            "type": "number",
            "example": 0.2,
            "default": 0.2
          },
          "opt_sel": {
            "multipleOf": 1,
            "maximum": 1,
            "minimum": 0,
            "type": "integer",
            "example": 1
          },
          "data": {
            "type": "string",
            "example": "[{\"Model Name\": \"Type\", \"Input 1\": \"Input\", \"Input 2\": \"Input\", \"Output 1\": \"Output\"}, {\"Model Name\": \"Min\", \"Input 1\": 0, \"Input 2\": 0, \"Output 1\": -1}, {\"Model Name\": \"Max\", \"Input 1\": 10, \"Input 2\": 20, \"Output 1\": 1},{\"Model Name\": \"Step\", \"Input 1\": 0, \"Input 2\": 0, \"Output 1\": 0}, {\"Model Name\": \"Weight\", \"Input 1\": 1, \"Input 2\": 1, \"Output 1\": 1}, {\"Model Name\": \"1\", \"Input 1\": \"6.239\", \"Input 2\": \"19.446\", \"Output 1\": \"0.3\"}]"
          }
        },
        "description": "Schema for request body format for Single Objective requests",
        "nullable": true
      },
      "WMOBO": {
        "title": "WMOBO",
        "required": [
          "beta",
          "data"
        ],
        "type": "object",
        "properties": {
          "beta": {
            "maximum": 1,
            "minimum": 0,
            "type": "number",
            "example": 0.2,
            "default": 0.2
          },
          "data": {
            "type": "string",
            "example": "[{\"Model Name\":\"Type\",\"Input 1\":\"Input\",\"Input 2\":\"Input\",\"Output 1\":\"Output\",\"Output 2\":\"Output\"},{\"Model Name\":\"Min\",\"Input 1\":0,\"Input 2\":0,\"Output 1\":-1,\"Output 2\":-2},{\"Model Name\":\"Max\",\"Input 1\":10,\"Input 2\":20,\"Output 1\":1,\"Output 2\":2},{\"Model Name\":\"Step\",\"Input 1\":0,\"Input 2\":0,\"Output 1\":0,\"Output 2\":0},{\"Model Name\":\"Weight\",\"Input 1\":1,\"Input 2\":1,\"Output 1\":1,\"Output 2\":1},{\"Model Name\":\"1\",\"Input 1\":\"1.173\",\"Input 2\":\"8.222\",\"Output 1\":\"0.5\",\"Output 2\":\"1.5\"}]"
          }
        },
        "description": "Schema for request body format for Single Objective requests"
      },
      "Empty": {
        "title": "",
        "type": "object",
        "description": "Schema for request body format for Single Objective requests"
      },
      "inline_response_200": {
        "type": "object",
        "properties": {
          "Input 1": {
            "type": "number",
            "example": 3.456
          },
          "Input 2": {
            "type": "number",
            "example": 18.762
          }
        },
        "x-examples": {
          "Example 1": {
            "Input 1": 6.239,
            "Input 2": 19.446
          }
        }
      },
      "inline_response_200_1": {
        "type": "object",
        "properties": {
          "Input 1": {
            "type": "number",
            "example": 3.87
          },
          "Input 2": {
            "type": "number",
            "example": 20
          }
        },
        "x-examples": {
          "Example 1": {
            "Input 1": 10,
            "Input 2": 20
          }
        }
      }
    },
    "securitySchemes": {
      "deker-demo-auth": {
        "type": "apiKey",
        "name": "Authorization",
        "in": "header",
        "description": "Auth Token from Settings & Models page in app. Must be provided as: `Bearer \\<API Auth Token\\>`"
      }
    }
  }
}